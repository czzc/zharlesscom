.glitch {
  position: relative;
  animation: glitch 1s infinite;
  will-change: transform;
  transform: translateZ(0);
  contain: layout style paint;
  isolation: isolate;
}

.glitch::before {
  content: attr(data-text);
  position: absolute;
  left: -2px;
  text-shadow: -1px 0 red;
  top: 0;
  color: white;
  background: var(--color-main-bg);
  overflow: hidden;
  clip: rect(0, 900px, 0, 0);
  animation: noise-before 1s infinite linear alternate-reverse;
}

.glitch::after {
  content: attr(data-text);
  position: absolute;
  left: 2px;
  text-shadow: -1px 0 blue;
  top: 0;
  color: white;
  background: var(--color-main-bg);
  overflow: hidden;
  clip: rect(0, 900px, 0, 0);
  animation: noise-after 1s infinite linear alternate-reverse;
}

@keyframes glitch {
  0%, 100% {
    text-shadow: 1px 0 0 red, -1px 0 0 blue;
    transform: translate3d(0, 0, 0);
  }
  10% {
    text-shadow: -1px 0 0 red, 1px 0 0 blue;
    transform: translate3d(-2px, 0, 0);
  }
  20% {
    text-shadow: 0.5px 0 0 red, -0.5px 0 0 lime;
    transform: translate3d(2px, 0, 0);
  }
  30% {
    text-shadow: -1px 0 0 red, 1px 0 0 lime;
    transform: translate3d(-1px, 0, 0);
  }
  40% {
    text-shadow: 0.7px 0 0 blue, -0.7px 0 0 lime;
    transform: translate3d(1px, 0, 0);
  }
  50% {
    text-shadow: -1px 0 0 blue, 1px 0 0 lime;
    transform: translate3d(0, 0, 0);
  }
  60% {
    text-shadow: 50px 0 0 blue, -50px 0 0 lime;
    transform: translate3d(-2px, 0, 0);
  }
  70% {
    text-shadow: 0 0 0 blue, 0 0 0 lime;
    transform: translate3d(2px, 0, 0);
  }
  80% {
    text-shadow: 1px 0 0 red, -1px 0 0 blue;
    transform: translate3d(-1px, 0, 0);
  }
  90% {
    text-shadow: -1px 0 0 red, 1px 0 0 blue;
    transform: translate3d(1px, 0, 0);
  }
}

@keyframes noise-before {
  0% {
    clip: rect(61px, 9999px, 52px, 0);
    opacity: 0.8;
  }
  25% {
    clip: rect(144px, 9999px, 162px, 0);
    opacity: 1;
  }
  50% {
    clip: rect(63px, 9999px, 37px, 0);
    opacity: 0.9;
  }
  75% {
    clip: rect(24px, 9999px, 153px, 0);
    opacity: 0.7;
  }
  100% {
    clip: rect(173px, 9999px, 166px, 0);
    opacity: 0.8;
  }
}

@keyframes noise-after {
  0% {
    clip: rect(26px, 9999px, 33px, 0);
    opacity: 0.7;
  }
  25% {
    clip: rect(154px, 9999px, 133px, 0);
    opacity: 0.9;
  }
  50% {
    clip: rect(191px, 9999px, 109px, 0);
    opacity: 1;
  }
  75% {
    clip: rect(118px, 9999px, 192px, 0);
    opacity: 0.8;
  }
  100% {
    clip: rect(67px, 9999px, 122px, 0);
    opacity: 0.7;
  }
}